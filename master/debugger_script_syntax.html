<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Malbolge: Debugger Script Syntax</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Malbolge
   &#160;<span id="projectnumber">0.0.3</span>
   </div>
   <div id="projectbrief">Malbolge virtual machine</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Debugger Script Syntax </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#syntax">Syntax</a></li>
<li class="level1"><a href="#types">Argument types</a></li>
<li class="level1"><a href="#functions">Functions</a><ul><li class="level2"><a href="#add_breakpoint">add_breakpoint</a><ul><li class="level3"><a href="#add_breakpoint_args">Arguments</a></li>
</ul>
</li>
<li class="level2"><a href="#remove_breakpoint">remove_breakpoint</a><ul><li class="level3"><a href="#remove_breakpoint_args">Arguments</a></li>
</ul>
</li>
<li class="level2"><a href="#run">run</a><ul><li class="level3"><a href="#run_args">Arguments</a></li>
</ul>
</li>
<li class="level2"><a href="#address_value">address_value</a><ul><li class="level3"><a href="#address_value_args">Arguments</a></li>
<li class="level3"><a href="#address_value_example">Example output</a></li>
</ul>
</li>
<li class="level2"><a href="#register_value">register_value</a><ul><li class="level3"><a href="#register_value_args">Arguments</a></li>
<li class="level3"><a href="#register_value_example">Example output</a></li>
</ul>
</li>
<li class="level2"><a href="#step">step</a></li>
<li class="level2"><a href="#resume">resume</a></li>
<li class="level2"><a href="#on_input">on_input</a><ul><li class="level3"><a href="#on_input_args">Arguments</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>Primitive debugging is supported through the use of a debugging script specified by the <code>&ndash;debugger-script flag</code>, for example: </p><div class="fragment"><div class="line">malbolge -ll --debugger-script my_prog.dbg my_prog.mal</div>
</div><!-- fragment --><p> The file extension is not relevant, it can be anything (or nothing). The script is essentially a list of commands for the debugger, it's syntax and supported functions are listed below.</p>
<p>Examples can be found in /test/programs.</p>
<h1><a class="anchor" id="syntax"></a>
Syntax</h1>
<ul>
<li>Whitespace is ignored, commands are ended by a <code>;</code></li>
<li>Arguments are held within brackets and are named, bound by <code>=</code></li>
<li>Arguments that have default values do not need to be specified</li>
<li>Arguments are separated by <code>,</code></li>
<li>Return values are printed to the error stream (same as logging), but prefixed with <code>&lt;Timestamp&gt;[DBGR]: </code></li>
<li>Comments can start anywhere, signified by <code>//</code>, and continue until the end of the line</li>
</ul>
<h1><a class="anchor" id="types"></a>
Argument types</h1>
<p><b><code>uint</code></b><br  />
Unsigned integer. Base-10 unless prefixed with <code>0x</code> which means base-16, or <code>0</code> which means octal.</p>
<p><b><code>ternary</code></b><br  />
10-trit unsigned ternary. Base-10 input unless prefixed with <code>t</code> which means base-3.</p>
<p><b><code>reg</code></b><br  />
vCPU register, <code>A</code>, <code>C</code>, or <code>D</code> (case-sensitive).</p>
<p><b><code>string</code></b><br  />
ACSII string, must be surrounded by <code>""</code> and standard escaping rules apply. Hex and octal escaping supported too.</p>
<h1><a class="anchor" id="functions"></a>
Functions</h1>
<h2><a class="anchor" id="add_breakpoint"></a>
add_breakpoint</h2>
<p>Adds a breakpoint at the given address. If one already exists at <code>address</code> then the previous one is replaced. If there are any breakpoints listed in a script, then at least one must appear before the run command. </p><div class="fragment"><div class="line">add_breakpoint(address=9, ignore_count=2);</div>
</div><!-- fragment --> <h3><a class="anchor" id="add_breakpoint_args"></a>
Arguments</h3>
<p><b><code>address = uint/ternary [Required]</code></b><br  />
Memory location in the virtual memory block to attach the breakpoint.</p>
<p><b><code>ignore_count [Defaults to 0]</code></b><br  />
Number of times <code>address</code> is hit before execution is paused.</p>
<h2><a class="anchor" id="remove_breakpoint"></a>
remove_breakpoint</h2>
<p>Removes a breakpoint at the given address. If no breakpoint exists at <code>address</code> then it is a no-op. </p><div class="fragment"><div class="line">remove_breakpoint(address=9);</div>
</div><!-- fragment --> <h3><a class="anchor" id="remove_breakpoint_args"></a>
Arguments</h3>
<p><b><code>address = uint/ternary [Required]</code></b><br  />
Memory location in the virtual memory block to remove a breakpoint from.</p>
<h2><a class="anchor" id="run"></a>
run</h2>
<p>Begins execution of the program. If <code>max_runtime_ms</code> is non-zero then program execution is stopped (<em>stopped</em>, not paused) after the number of milliseconds requested unless a breakpoint is hit first. Subsequent commands in the script are not read until a breakpoint is hit or the program ends.</p>
<p>There can only be a single <code>run</code> command in a script, use <code>resume</code> to continue execution after a breakpoint is hit. </p><div class="fragment"><div class="line">run();</div>
</div><!-- fragment --> <h3><a class="anchor" id="run_args"></a>
Arguments</h3>
<p><b><code>max_runtime_ms = uint/ternary [Defaults to 0, which represents infinite runtime]</code></b><br  />
Number of milliseconds the program is allowed to run without hitting a breakpoint.</p>
<h2><a class="anchor" id="address_value"></a>
address_value</h2>
<p>Returns the value at the given address. Although not a requirement, it is generally only meaningful to call this function when the program is paused. </p><div class="fragment"><div class="line">address_value(address=9);</div>
</div><!-- fragment --> <h3><a class="anchor" id="address_value_args"></a>
Arguments</h3>
<p><b><code>address = uint/ternary [Required]</code></b><br  />
Memory location in the virtual memory block to read. </p>
<h3><a class="anchor" id="address_value_example"></a>
Example output</h3>
<div class="fragment"><div class="line">2020-12-19 11:40:58.696620673[DBGR]: address_value(address={d:9, t:0000000100}); = {d:125, t:0000011122}</div>
</div><!-- fragment --><h2><a class="anchor" id="register_value"></a>
register_value</h2>
<p>Returns the value at the given register. Although not a requirement, it is generally only meaningful to call this function when the program is paused.</p>
<p>If the register is <code>C</code> or <code>D</code>, then the register contains an address - this is printed along with the value at the address in virtual memory. </p><div class="fragment"><div class="line">register_value(reg=A);</div>
</div><!-- fragment --> <h3><a class="anchor" id="register_value_args"></a>
Arguments</h3>
<p><b><code>reg = reg [Required]</code></b><br  />
Memory location in the virtual memory block to read. </p>
<h3><a class="anchor" id="register_value_example"></a>
Example output</h3>
<div class="fragment"><div class="line">2020-12-19 11:40:58.696758245[DBGR]: register_value(reg=C); = {{d:9, t:0000000100}, {d:125, t:0000011122}}</div>
</div><!-- fragment --><h2><a class="anchor" id="step"></a>
step</h2>
<p>In a paused state, this will advance program execution by a single instruction. Script parsing will fail if this function is before a <code>run</code>. </p><div class="fragment"><div class="line">step();</div>
</div><!-- fragment --><h2><a class="anchor" id="resume"></a>
resume</h2>
<p>In a paused state, this will resume program execution. Script parsing will fail if this function is before a <code>run</code>. </p><div class="fragment"><div class="line">resume();</div>
</div><!-- fragment --><h2><a class="anchor" id="on_input"></a>
on_input</h2>
<p>Adds a string onto the input data queue. When the program requests input data (i.e. from <code>cin</code>), then the next string in this queue is passed to it or the program will block waiting for input. This allows you to 'pre-load' input data before starting program execution. </p><div class="fragment"><div class="line">on_input(data=&quot;Hello world!&quot;);</div>
</div><!-- fragment --> <h3><a class="anchor" id="on_input_args"></a>
Arguments</h3>
<p><b><code>data = string [Required]</code></b><br  />
Program input. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
